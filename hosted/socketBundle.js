(()=>{var e={413:e=>{const t=e=>{console.log(e)};e.exports={handleError:t,sendPost:async(e,n,a)=>{const i=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}),o=await i.json();o.error&&t(o.error),o.redirect&&(window.location=o.redirect),a&&a(o)},sendPut:async(e,n,a)=>{const i=await fetch(e,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}),o=await i.json();o.error&&t(o.error),o.redirect&&(window.location=o.redirect),a&&a(o)},hideError:()=>{}}}},t={};function n(a){var i=t[a];if(void 0!==i)return i.exports;var o=t[a]={exports:{}};return e[a](o,o.exports,n),o.exports}(()=>{const e=io(),t=n(413);let a=5,i=!0;const o=async e=>{e.preventDefault(),t.hideError();const n=document.getElementById("editbox"),a=await fetch("/getUsername"),o=await a.json(),s=await fetch("/getToken"),r=await s.json(),c=await fetch("/getProfile"),l=await c.json();l.profile&&(i=l.profile[0].premium),t.sendPost(e.target.action,{content:n.value,username:o.docs[0].username,_csrf:r.csrfToken}),n.value=""},s=e=>{const t=e.split(":"),n=document.createElement("div");n.innerHTML=`\n    <div class='box tile is-parent is-vertical notification is-info'>\n        <div class='is-child mb-3'>\n            ${t[0]}\n            \n        </div>\n        <div class='is-child has-background-light has-text-dark box'>\n            ${t[1]} \n        </div>\n    </div>\n    <br />\n    `,document.getElementById("messages").prepend(n),i&&(a--,a||((()=>{const e=document.createElement("div");e.innerHTML="    <div class='box tile is-parent is-vertical notification is-warning'>\n    <div class='is-child'>\n    <div class='has-background-light p-3 box'>\n        THIS IS AN AD\n        </div>\n    </div>\n</div>\n<br />\n",document.getElementById("messages").prepend(e)})(),a=5))},r=e=>React.createElement("form",{id:"editForm",onSubmit:o,action:"/createMessage",method:"POST"},React.createElement("textarea",{className:"textarea is-medium",id:"editbox",type:"text"}),React.createElement("br",null),React.createElement("div",{className:"is-flex is-flex-direction-row-reverse"},React.createElement("input",{className:"button is-medium ml-2",type:"submit"}),React.createElement("select",{className:"select is-medium ml-3",id:"channelSelect"},React.createElement("option",{value:"general"},"General"),React.createElement("option",{value:"meme"},"Meme"))));window.onload=async()=>{const t=await fetch("/getProfile");(await t.json()).profile[0]?.premium&&(i=!1),ReactDOM.render(React.createElement(r,null),document.getElementById("createMessage")),(()=>{const t=document.getElementById("editForm"),n=document.getElementById("editbox"),a=document.getElementById("channelSelect");t.addEventListener("submit",(t=>{if(t.preventDefault(),n.value){const t={message:n.value,channel:a.value};e.emit("chat message",t)}}))})(),e.on("general",s),(()=>{const t=document.getElementById("channelSelect");document.getElementById("messages"),t.addEventListener("change",(()=>{"meme"===t.value?(e.off("general"),e.on("meme",s)):(e.off("meme"),e.on("general",s))}))})()}})()})();