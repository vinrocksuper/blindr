(()=>{var e={413:e=>{const t=e=>{console.log(e)};e.exports={handleError:t,sendPost:async(e,n,a)=>{const o=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}),r=await o.json();r.error&&t(r.error),r.redirect&&(window.location=r.redirect),a&&a(r)},sendPut:async(e,n,a)=>{const o=await fetch(e,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}),r=await o.json();r.error&&t(r.error),r.redirect&&(window.location=r.redirect),a&&a(r)},hideError:()=>{}}}},t={};function n(a){var o=t[a];if(void 0!==o)return o.exports;var r=t[a]={exports:{}};return e[a](r,r.exports,n),r.exports}(()=>{const e=io(),t=n(413),a=async e=>{e.preventDefault(),t.hideError();const n=document.getElementById("editbox"),a=await fetch("/getUsername"),o=await a.json(),r=await fetch("/getToken"),c=await r.json();console.log(o),t.sendPost(e.target.action,{content:n.value,username:o.docs[0].username,_csrf:c.csrfToken}),n.value=""},o=e=>{const t=e.split(":"),n=document.createElement("div");n.innerHTML=`\n    <div class='box tile is-parent is-vertical notification is-info'>\n        <div class='is-child my-1'>\n            ${t[0]}\n        </div>\n        <hr class='my-2'/>\n        <div class='is-child'>\n            ${t[1]} \n        </div>\n    </div>\n    <br />\n    `,document.getElementById("messages").appendChild(n)},r=e=>React.createElement("form",{id:"editForm",onSubmit:a,action:"/createMessage",method:"POST"},React.createElement("textarea",{className:"textarea is-medium",id:"editbox",type:"text"}),React.createElement("br",null),React.createElement("div",{className:"is-flex is-flex-direction-row-reverse"},React.createElement("input",{className:"button is-medium ml-2",type:"submit"}),React.createElement("select",{className:"select is-medium ml-3",id:"channelSelect"},React.createElement("option",{value:"general"},"General"),React.createElement("option",{value:"meme"},"Meme"))));window.onload=()=>{ReactDOM.render(React.createElement(r,null),document.getElementById("createMessage")),(()=>{const t=document.getElementById("editForm"),n=document.getElementById("editbox"),a=document.getElementById("channelSelect");t.addEventListener("submit",(t=>{if(t.preventDefault(),n.value){const t={message:n.value,channel:a.value};e.emit("chat message",t)}}))})(),e.on("general",o),(()=>{const t=document.getElementById("channelSelect"),n=document.getElementById("messages");t.addEventListener("change",(()=>{n.innerHTML="","meme"===t.value?(e.off("general"),e.on("meme",o)):(e.off("meme"),e.on("general",o))}))})()}})()})();